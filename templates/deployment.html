{% extends 'layout.html' %}
{% block page_content %}

    <div class="modal fade-scale" id="deployModal" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Give the tool of which the price you would predict.</h4>
                </div>
                <div class="modal-body">
                    <form method="POST" action="{{url_for('deployment')}}">
                        <fieldset class="form-group">
                        <legend class="border-bottom mb-4">Feed the model with a sample and predict the label</legend>
                        {% for slider in sliders %}
                        <div class="slidecontainer">
                        <p>{{ slider['name'] }}</p> {% if slider['is_cat'] %} <p>Category codes: {{ slider['codes'] }}</p> {% endif %}
                        <input type="range" min="{{ slider['min'] }}" max="{{ slider['max'] }}" step="{{ slider['step'] }}" class="slider" id="{{ slider['slider_id'] }}" name="{{ slider['name'] }}">
                        <p>Value: <span id="{{ slider['value_id'] }}"></span></p>
                        </div>
                        {% endfor %}
                        </fieldset>
                        <div class="modal-footer">
                        <input type="submit" value="Submit" />
                        </div>
                    </form>
                    {% for slider in sliders %}
                    <script>
                        var slider = document.getElementById("{{ slider['slider_id'] }}");
                        var output = document.getElementById("{{ slider['value_id'] }}");
                        output.innerHTML = slider.value;

                        slider.oninput = function() {
                            document.getElementById("{{ slider['value_id'] }}").innerHTML = this.value;
                        }
                    </script>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>

    <script>
        $(window).on('load', function(){
             if (sessionStorage.getItem('#deployModal') !== 'true'){
        $('#deployModal').modal('show');
        sessionStorage.setItem('#deployModal','true');
        }
     });
    </script>
<div class="container-table100">
    <div class="wrap-table100">
    {% if filename %}
    <img src="{{ filename }}" alt="Path of sample through DecisionTreeRegressor Image" style='height: 100%; width: 100%; object-fit: contain'>
    {% endif %}
    </div>
    <div class="information">
        <div class="card chart-wrap bg list">
            <h3>List</h3>
            <div class="chart">
                <ul>
                    <li class="list-item">Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</li>
                    <li class="list-item">Aliquam tincidunt mauris eu risus.</li>
                    <li class="list-item">Vestibulum auctor dapibus neque.</li>
                    <li class="list-item">Aliquam tincidunt mauris eu risus.</li>
                    <li class="list-item">Vestibulum auctor dapibus neque.</li>
                </ul>
            </div>
        </div>
    </div>
</div>
    <section id="feature" class="section-padding wow fadeIn delay-05s">
      <div class="container">
        <div class="row">
          <div class="col-md-3 col-sm-6 col-xs-12">
            <div class="wrap-item text-center">
              <div class="item-img">
                <img src="/static/images/ser01.png">
              </div>
              <h3 class="pad-bt15">Training data</h3>
                <p>Number of samples: {{ n_samples }}</p>
            </div>
          </div>
          <div class="col-md-3 col-sm-6 col-xs-12">
            <div class="wrap-item text-center">
              <div class="item-img">
                <img src="/static/images/ser02.png">
              </div>
              <h3 class="pad-bt15">Decision tree</h3>
               <p>Max. Depth (max_depth): {{ max_depth }}
            Min. samples in end leaf nodes (min_samples_leaf): {{ min_samples_leaf }}
            Max. available features at each split (max_features): {{ max_features }}</p>
            </div>
          </div>
          <div class="col-md-3 col-sm-6 col-xs-12">
            <div class="wrap-item text-center">
              <div class="item-img">
                <img src="/static/images/ser03.png">
              </div>
                <h3 class="pad-bt15">Prediction result</h3>
              <p>Prediction for given sample: {{ prediction }}</p>

            </div>
          </div>
          <div class="col-md-3 col-sm-6 col-xs-12">
            <div class="wrap-item text-center">
              <div class="item-img">
                <img src="/static/images/ser04.png">
              </div>
              <h3 class="pad-bt15">Training score</h3>
              <p>Score on training set: {{ training_score }}</p>
            </div>
          </div>
        </div>
      </div>
    </section>
{% endblock page_content%}